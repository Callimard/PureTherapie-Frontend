<div class="d-flex flex-column justify-content-center align-items-start" *ngIf="!success">
  <h3 style="text-align: center">Enregistrement client</h3>
  <div>
    <div class="d-flex justify-content-between">
      <label for="lastName" class="form-label">
        Nom:
      </label>
      <input type="text" id="lastName" name="lastName" class="form-control" [(ngModel)]="selectedLastName"/>
      <label for="firstName" class="form-label">
        Prénom
      </label>
      <input type="text" id="firstName" name="firstName" class="form-control" [(ngModel)]="selectedFirstName"/>
    </div>
    <div class="d-flex justify-content-between">
      <label for="email" class="form-label">
        E-mail
      </label>
      <input type="email" id="email" name="email" class="form-control" [(ngModel)]="selectedEmail"/>
    </div>
    <div class="d-flex justify-content-between">
      <label for="gender" class="form-label">
        Genre:
      </label>
      <select class="form-select" id="gender" name="gender" [(ngModel)]="selectedGender">
        <option [value]="true">Homme</option>
        <option [value]="false">Femme</option>
      </select>
    </div>
    <div class="d-flex justify-content-between">
      <label for="phone" class="form-label">
        Telephone: (+33)
      </label>
      <input type="tel" id="phone" name="phone" class="form-control" [(ngModel)]="selectedPhone"/>
    </div>
    <div class="d-flex justify-content-between">
      <label for="birthday" class="form-label">
        Date de naissance:
      </label>
      <input type="date" id="birthday" name="birthday" class="form-control" [(ngModel)]="selectedBirthday"/>
    </div>
  </div>
  <div class="d-flex justify-content-between">
    <label for="origin">Comment avez-vous connue PureTherapie?</label>
    <select class="form-select" id="origin" name="origin" [(ngModel)]="selectedPersonOrigin">
      <option *ngFor="let origin of personOrigins" [ngValue]="origin">{{origin.type}}</option>
    </select>
  </div>
  <div class="d-flex justify-content-center align-items-center">
    <button class="btn btn-primary mt-sm-3" type="button"
            (click)="openModalClientRegistrationSuccess(clientRegistrationConfirmation)">Enregistrement
    </button>
  </div>

  <ng-template #clientRegistrationConfirmation>
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title text-success" id="takingAppointmentConfirmation">Récapitulatif de l'enreigistrement</h2>
        <button type="button" class="btn-close" (click)="declineClientRegistration()"></button>
      </div>
      <div class="modal-body">
        <h3>Données client a enregistrer</h3>
        <p>
          <strong>Nom: </strong> {{selectedLastName}}<br/>
          <strong>Prénom: </strong> {{selectedFirstName}}<br/>
          <strong>E-mail: </strong> {{selectedEmail}}<br/>
          <strong>Genre: </strong> {{selectedGender ? 'Homme' : 'Femme'}}<br/>
          <strong>Téléphone: </strong> +33 {{selectedPhone}}<br/>
          <strong>Date de naissance: </strong> {{selectedBirthday}}<br/>
          <strong>Comment avez-vous connue PureTherapie: </strong> {{selectedPersonOrigin.type}}<br/>
        </p>
        <h3 *ngIf="validAppointmentAfterRegistration === 'true'">Donnée de rendez-vous</h3>
        <p *ngIf="validAppointmentAfterRegistration === 'true'">
          <strong>Jour: </strong>{{appointmentData.day}}<br/>
          <strong>Heure: </strong>{{appointmentData.beginTime}}<br/>
          <strong>Technicien(ne): </strong> {{appointmentData.technician.lastName}} {{appointmentData.technician.firstName}}
          <br/>
          <strong>Soin pratiqué: </strong> {{appointmentData.ac.name}}<br/>
          <strong>Temps de prise en charge: </strong> {{appointmentData.ac.timeExecution}} min<br/>
        </p>
      </div>
      <div class="modal-footer d-flex justify-content-end">
        <button type="button" class="btn btn-danger" (click)="declineClientRegistration()">Annuler</button>
        <button type="button" class="btn btn-primary"
                (click)="confirmOnlyClientRegistration()">{{validAppointmentAfterRegistration === 'true' ? "Uniquement s'enregistrer" : "S'enregistrer"}}</button>
        <button type="button" class="btn btn-primary"
                (click)="confirmClientRegistrationAndAppointment()"
                *ngIf="validAppointmentAfterRegistration === 'true'">S'enregistrer et valider le rendez-vous
        </button>
      </div>
    </div>
  </ng-template>
</div>
<div class="d-flex flex-column justify-content-center align-items-start"
     *ngIf="success">
  <h2 class="text-success">Féliciation, votre
    enregistrement{{chooseAlsoTakingAppointment ? " et votre prise de rendez-vous ont été pris en compte" : ''}}</h2>
  <h3>Récaptitulatif des données enregistrées</h3>
  <p>
    <strong>Nom: </strong> {{selectedLastName}}<br/>
    <strong>Prénom: </strong> {{selectedFirstName}}<br/>
    <strong>E-mail: </strong> {{selectedEmail}}<br/>
    <strong>Genre: </strong> {{selectedGender ? 'Homme' : 'Femme'}}<br/>
    <strong>Téléphone: </strong> +33 {{selectedPhone}}<br/>
    <strong>Date de naissance: </strong> {{selectedBirthday}}<br/>
    <strong>Comment avez-vous connue PureTherapie: </strong> {{selectedPersonOrigin.type}}<br/>
  </p>
  <h3>Récapitulatif du rendez-vous</h3>
  <p>
    <strong>Jour: </strong>{{appointmentData.day}}<br/>
    <strong>Heure: </strong>{{appointmentData.beginTime}}<br/>
    <strong>Technicien(ne): </strong> {{appointmentData.technician.lastName}} {{appointmentData.technician.firstName}}
    <br/>
    <strong>Soin pratiqué: </strong> {{appointmentData.ac.name}}<br/>
    <strong>Temps de prise en charge: </strong> {{appointmentData.ac.timeExecution}} min<br/>
  </p>
  <a href="https://puretherapie.com/" class="btn btn-primary">Retour à l'acceuil PureTherapie</a>
</div>
